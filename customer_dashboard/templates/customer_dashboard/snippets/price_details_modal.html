{% load humanize %}
{% block modals %}
    <div class="modal fade" role="dialog" tabindex="-1" id="modal-price-details-{{ forloop.counter }}">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Price Details</h4><button class="btn-close" type="button" aria-label="Close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    {% for line_type in item.line_types %}
                        <p style="margin-bottom: 0px;">
                            <strong>{{ line_type.type.name|upper }}</strong>
                        </p>
                        {% for order_line_item in line_type.items %}
                            <div class="row">
                                <div class="col">
                                    <p style="margin-bottom: 0px;">
                                        <em>
                                            <span style="background-color: rgb(248, 249, 252);">
                                                ${{ order_line_item.rate|floatformat:2|intcomma }} / @ {{ order_line_item.quantity|floatformat|intcomma }} {{ order_line_item.order_line_item_type.units|lower }}
                                                {% if order_line_item.description %}
                                                    ({{ order_line_item.description|lower }})
                                                {% endif %}
                                            </span>
                                        </em>
                                    </p>
                                </div>
                                <div class="col">
                                    <p style="text-align: right;margin-bottom: 0px;">
                                        <em>
                                            <span style="background-color: rgb(248, 249, 252);">${{ order_line_item.seller_payout_price|floatformat:2|intcomma }}</span>
                                            {% if request.user.is_staff %}
                                                <span style="background-color: rgb(248, 249, 252);">+ {{ order_line_item.platform_fee_percent|floatformat:2 }}% = ${{ order_line_item.customer_price|floatformat:2|intcomma }} (Customer)</span>
                                            {% endif %}
                                        </em>
                                    </p>
                                </div>
                            </div>
                        {% endfor %}
                        <p></p>
                    {% endfor %}
                </div>
                <div class="modal-footer">
                    <button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
