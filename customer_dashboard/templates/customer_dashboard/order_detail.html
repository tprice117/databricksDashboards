{% extends 'customer_dashboard/base.html' %}
{% load static %}
{% load humanize %}
{% block title %}
    Order Details
{% endblock %}
{% block stylesheet %}
    <style></style>
{% endblock %}
{% block content %}
    <div class="container-fluid">
        <h3 class="text-dark mb-1">Order Service Detail</h3>
    </div>
    <div class="container">
        <div class="row" style="padding-bottom: 24px;">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Service Date: {{ order.end_date }}</h4>
                        <p style="margin-bottom: 0px;padding-top: 16px;">
                            <strong>Type</strong>
                        </p>
                        <p>{{ order.type }}</p>
                        <p style="margin-bottom: 0px;">
                            <strong>Status</strong>
                        </p>
                        <p>{{ order.status }}</p>
                        <p style="margin-bottom: 0px;">
                            <strong>Order Service ID</strong>
                        </p>
                        <p>{{ order.id }}</p>
                        <p class="card-text"></p><a class="card-link" href="#"></a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                {% if order.order_group.user_address.latitude and order.order_group.user_address.longitude %}
                    <gmp-map center="{{ order.order_group.user_address.latitude }},{{ order.order_group.user_address.longitude }}" zoom="14" map-id="DEMO_MAP_ID">
                        <gmp-advanced-marker position="{{ order.order_group.user_address.latitude }},{{ order.order_group.user_address.longitude }}" title="{{ order.order_group.user_address.name }}"></gmp-advanced-marker>
                    </gmp-map>
                {% else %}
                    <iframe allowfullscreen="" frameborder="0" src="https://cdn.bootstrapstudio.io/placeholders/map.html" width="100%" height="200"></iframe>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row" style="padding-bottom: 24px;">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Order Details</h4>
                        <form>
                            <div class="row">
                                <div class="col">
                                    <p style="margin-bottom: 0px;">
                                        <strong>Product</strong>
                                    </p>
                                    <p>{{ order.order_group.seller_product_seller_location.seller_product.product.main_product.name }}</p>
                                    <p style="margin-bottom: 0px;">
                                        <strong>Location</strong>
                                    </p>
                                    <p>
                                        <a class="card-link" href="https://www.google.com/maps/place/{{ order.order_group.user_address.formatted_address|urlencode }}" target="_blank">{{ order.order_group.user_address.formatted_address }}</a>
                                    </p>
                                    <p style="margin-bottom: 0px;">
                                        <strong>Supplier</strong>
                                    </p>
                                    <p>{{ order.order_group.seller_product_seller_location.seller_location.name }}</p><a class="btn btn-light btn-sm float-end" role="button" href="{% url 'customer_order_group_detail' order_group_id=order.order_group.id %}">See Details</a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Pricing Details</h4>
                        <p style="margin-bottom: 0px;">
                            <strong>Total</strong>
                        </p>
                        <p style="border-bottom-width: 1px;border-bottom-style: solid;padding-bottom: 16px;">${{ order.customer_price|floatformat:2|intcomma }}</p>
                        <div class="table-responsive" style="margin-bottom: 16px;">
                            <table class="table">
                                <thead>
                                    <tr></tr>
                                </thead>
                                <tbody>
                                    {% for order_line_item in order.order_line_items.all %}
                                        <tr>
                                            <td>{{ order_line_item.order_line_item_type.name }}</td>
                                            <td>${{ order_line_item.customer_price|floatformat:2|intcomma }} {{ order_line_item.order_line_item_type.units }}</td>
                                            <td>{{ order_line_item.description }}</td>
                                            <td>
                                                {% if order_line_item.paid %}
                                                    Paid
                                                {% else %}
                                                    Unpaid
                                                {% endif %}
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row" style="padding-bottom: 24px;">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Logs</h4>
                        <form>
                            <div class="row">
                                <div class="col">
                                    <p style="margin-bottom: 0px;">
                                        <strong>Created On</strong>
                                    </p>
                                    <p>{{ order.created_on }}</p>
                                    <p style="margin-bottom: 0px;">
                                        <strong>Submitted On</strong>
                                    </p>
                                    <p>{{ order.submitted_on }}</p>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-6"></div>
        </div>
    </div>
{% endblock %}
