{% extends 'dashboards/base.html' %}
{% load static %}
{% load humanize %}
{% block title %}
{{user.first_name}} {{user.last_name}} Sales Detail
{% endblock %}
{% block content %}
<style>
    table tbody tr:nth-child(odd) {
        background-color: #505063;
    }
    table tbody tr:nth-child(even) {
        background-color: #80808c;
    }
    ul #nav2  {
        list-style-type: none;
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: #333;
      }
    li #nav2 {
        float: left;
    }
    li.active a {
        background-color: #4CAF50;
        color: white;
    }
    thead th {
        position: sticky;
        top: 0;
        background-color: #333;
        color: white;
        z-index: 1;
    }
</style>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Sales Detail</title>
</head>
<body>
    <nav>
        <ul id="nav2" style="display: flex; gap: 100px;">
            <li id="nav2" class="{% if request.resolver_match.url_name == 'user_sales_detail' %}active{% endif %}">
                <a href="{% url 'user_sales_detail' user.id %}" class="btn btn-primary" style="border-radius: 0;">Overview</a>
            </li>
            <li id="nav2" class="{% if request.resolver_match.url_name == 'user_sales_product_mix' %}active{% endif %}"><a href="{% url 'user_sales_product_mix' user_id=user.id %}" class="btn btn-primary" style="border-radius: 0;">Product Mix</a></li>
            <li id="nav2" class="{% if request.resolver_match.url_name == 'user_sales_top_accounts' %}active{% endif %}"><a href="{% url 'user_sales_top_accounts' user_id=user.id %}" class="btn btn-primary" style="border-radius: 0;">Top Accounts</a></li>
            <li id="nav2" class="{% if request.resolver_match.url_name == 'user_sales_new_accounts' %}active{% endif %}"><a href="{% url 'user_sales_new_accounts' user_id=user.id %}" class="btn btn-primary" style="border-radius: 0;">New Accounts</a></li>
            <li id="nav2" class="{% if request.resolver_match.url_name == 'user_sales_new_buyers' %}active{% endif %}"><a href="{% url 'user_sales_new_buyers' user_id=user.id %}" class="btn btn-primary" style="border-radius: 0;">New Buyers</a></li>
            <li id="nav2" class="{% if request.resolver_match.url_name == 'user_sales_churned_accounts' %}active{% endif %}"><a href="{% url 'user_sales_churned_accounts' user_id=user.id %}" class="btn btn-primary" style="border-radius: 0;">Churned Accounts</a></li>
            <li id="nav2" class="{% if request.resolver_match.url_name == 'user_sales_28_day_list' %}active{% endif %}"><a href="{% url 'user_sales_28_day_list' user_id=user.id %}" class="btn btn-primary" style="border-radius: 0;">28 Day List</a></li>
        </ul>
    </nav>
    <header>
        <h1>{{user.first_name}} {{user.last_name}}</h1>
    </header>
    <main>
        <section>
            <h3>28 Day list for {{user.first_name}}, {{user.last_name}}</h3>
            {{total_order_count}}  Orders Tracked 
            <div style="overflow-x: auto; max-height: 42em;">
                <table>
                    <thead>
                        <tr style="border-bottom: 1px solid #ddd;">
                            <th style="padding-right: 200px;">order_group_id</th>
                            <th style="padding-right: 100px;">order_end_date</th>
                            <th style="padding-right: 100px;">AutoRenewalDate</th>
                            <th style="padding-right: 100px;">order_id</th>
                            <th style="padding-right: 100px;">Downstream account_owner</th>
                            <th style="padding-right: 100px;">user_address_name</th>
                            <th style="padding-right: 100px;">first_name</th>
                            <th style="padding-right: 100px;">last_name</th>
                            <th style="padding-right: 100px;">email</th>
                            <th style="padding-right: 100px;">status</th>
                            <th style="padding-right: 100px;">seller_location_name</th>
                            <th style="padding-right: 100px;">Product name</th>
                            <th style="padding-right: 100px;">IsMostRecentOrder</th>
                            <th style="padding-right: 100px;">Take Action</th>
                            <th style="padding-right: 100px;">OrderGroupURL</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for order in orders%}
                        <tr>
                            <td>{{order.annotated_order_group_id}}</td>     
                            <td>{{order.order_end_date}}</td>   
                            <td>{{order.autorenewal_date}}</td>            
                            <td>{{order.order_id}}</td>            
                            <td>{{order.account_owner_first_name}} {{order.account_owner_last_name}}</td>                            <td>{{order.user_address_name}}</td>     
                            <td>{{order.user_first_name}}</td>     
                            <td>{{order.user_last_name}}</td>     
                            <td>{{order.user_email}}</td>     
                            <td>{{order.order_status}}</td>     
                            <td>{{order.sellerlocation_name}}</td>     
                            <td>{{order.mainproduct_name}}</td>  
                            <td>{{order.is_most_recent_order}}</td>   
                            <td>{{order.take_action}}</td>   
                            <td><a href="{{ order.order_group_url_annotate }}">{{ order.order_group_url_annotate }}</a></td>
                            
                        </tr>
                        {%endfor%}                    
                    </tbody>
                </table>
            </div>
        </section>
    </main>
    <div style="display: flex; justify-content: center; margin-top: 50px;">
        <a href="{% url 'sales_leaderboard' %}" class="btn btn-primary">Back to Leaderboard</a>
    </div>
    <footer>
        <p>&copy; 2024 | Downstream | Sales Data by Rep</p>
    </footer>
</body>
</html>

{% endblock %}