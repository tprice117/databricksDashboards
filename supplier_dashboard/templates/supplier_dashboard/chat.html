{% extends 'supplier_dashboard/supplier_base.html' %}
{% load static %}
{% load humanize %}
{% block title %}
    Booking Details
{% endblock %}
{% block content %}
<div class="container-fluid">
  <div class="d-sm-flex justify-content-between align-items-center mb-4">
      <h3 class="text-dark mb-0">Chat</h3>
  </div>
  <div class="row">
      <div class="col flex-grow-1 mb-4">
          <div class="card shadow m-auto border-start-primary py-2">
              <div class="card-body">
                {% for message in messages %}
                  {% if message.sent_by_current_user %}
                    <div class="row align-items-center no-gutters" style="margin-top: 24px;">
                      <div class="col-8 ms-auto me-2">
                          <div class="card" style="background: var(--bs-secondary-border-subtle);color: var(--bs-primary-text-emphasis);">
                              <div class="card-body">
                                  <p class="card-text">{{message.message}}</p>
                              </div>
                          </div>
                          <div class="row float-end">
                              <div class="col"><small class="form-text">{{message.user.first_name}} {{message.user.last_name}}&nbsp;&nbsp;</small>
                                {% if message.user.photo %}
                                  <img class="rounded-circle" width="100" height="80" style="width: 20px;height: 20px;" src="{{message.user.photo.url}}">
                                {% endif %}
                                </div>
                          </div>
                      </div>
                    </div>
                  {% else %}
                    <div class="row align-items-center no-gutters">
                        <div class="col-8 me-2">
                            <div class="card" style="background: var(--bs-primary-bg-subtle);color: var(--bs-primary-text-emphasis);">
                                <div class="card-body">
                                    <p class="card-text">{{message.message}}</p>
                                </div>
                            </div>
                            <div class="row float-end">
                                <div class="col"><small class="form-text">{{message.user.first_name}} {{message.user.last_name}}&nbsp;&nbsp;</small>
                                  {% if message.user.photo %}
                                    <img class="rounded-circle" width="100" height="80" style="width: 20px;height: 20px;" src="{{message.user.photo.url}}">
                                  {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                  {% endif %}
                {% endfor %}
                  <div class="row" style="margin-top: 16px;padding-top: 16px;border-top-style: solid;border-top-color: var(--bs-primary);">
                      <div class="col d-md-flex justify-content-md-start"><input class="flex-grow-1" type="text" style="margin-right: 12px;"><button class="btn btn-primary" type="button">Send</button></div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>
{% endblock %}
