document.addEventListener("DOMContentLoaded",function(){function e(){m.style.position=f,window.scrollBy(0,y),document.getElementById("results-container").scrollTo(0,0),d.style.display="none",s.style.display="none",c.style.borderRadius="0.85rem"}function t(){if(window.innerWidth<600){window.scrollY;m.style.position="fixed"}d.style.display="block",s.style.display="flex",c.style.borderRadius="0.85rem 0.85rem 0px 0px"}function n(n){h=0,n?(p.style.display="block",fetch(`https://api.trydownstream.com/explore/v1/search/?q=${encodeURIComponent(n)}`).then(e=>e.json()).then(n=>{u.innerHTML="",l.textContent="",t();const o=document.createElement("ul");if(o.classList.add("results-list"),!n||n.errors)return void e();if(!(n&&n.main_products&&n.main_product_categories&&n.main_product_category_groups)){const e=document.createElement("li");return e.textContent="No results found",o.appendChild(e),void u.appendChild(o)}n.main_products,n.main_product_categories,n.main_product_category_groups;h=n.main_products.length+n.main_product_categories.length+n.main_product_category_groups.length,n.main_product_categories.forEach(e=>{const t=document.createElement("li"),i=document.createElement("a"),r=document.createElement("img"),d=document.createElement("span");d.textContent=`Category: ${e.name}`,i.href=`https://portal.trydownstream.com/customer/order/new/product/${e.id}`,r.src=e.icon,i.appendChild(r),i.appendChild(d),t.appendChild(i),o.appendChild(t);const s=n.main_products.filter(t=>t.main_product_category===e.id);s.forEach(t=>{const n=document.createElement("li");n.style.paddingLeft="40px";const i=document.createElement("a"),r=document.createElement("img"),d=document.createElement("span");i.href=`https://portal.trydownstream.com/customer/order/new/options/${t.id}`,t.images.length>0?r.src=t.images[0]:r.src=e.icon,d.textContent=`${t.name}`,i.appendChild(r),i.appendChild(d),n.appendChild(i),o.appendChild(n)})}),n.main_product_category_groups.forEach(e=>{const t=document.createElement("li"),n=document.createElement("a"),i=document.createElement("img"),r=document.createElement("span");r.textContent=`All ${e.name}`,n.href=`https://portal.trydownstream.com/customer/order/new/?q=&group_id=${e.id}`,i.src=e.icon,n.appendChild(i),n.appendChild(r),t.appendChild(n),o.appendChild(t)}),u.appendChild(o),l.textContent=`Showing ${h} results`}).catch(e=>console.error("Error:",e)).finally(()=>{p.style.display="none"})):e()}const o=document.createElement("style");o.innerHTML="\n    .search-form{display:flex;justify-content:center}.dropdown{position:relative;width:600px;margin-top:20px}.dropdown-content,.search-input{width:100%;background-color:#fff}@media(max-width:650px){.dropdown{width:100%}}.search-input{display:block;min-width:300px;padding:.575rem .85rem;margin:0;font-family:inherit;font-size:1.25rem;font-weight:400;line-height:1.75;color:#858796;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-clip:padding-box;border:1px solid #858796;border-radius:.85rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:textfield;outline-offset:-2px}.search-input:focus{color:#858796;background-color:#fff;border-color:#a7b9ef;outline:0;box-shadow:0 0 0 .15rem rgba(78,115,223,.25)}.dropdown-content{display:none;position:absolute;margin-bottom:3rem;min-width:160px;box-shadow:0 8px 16px 0 rgba(0,0,0,.2);z-index:1000;border-bottom:1px solid #ccc}.results-list-container{color:#000;padding:12px 16px;text-decoration:none;display:block;cursor:pointer}.spinner{display:None;width:20px;height:20px;border:3px solid #f3f3f3;border-top:3px solid #3498db;border-radius:50%;animation:1s linear infinite spin;position:absolute;right:40px;top:18px}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.results-list{list-style-type:none;padding:0;margin:0;max-height:65vh;overflow-y:auto;border:1px solid #ccc;border-radius:4px;background-color:#fff;position:relative;width:100%}.results-list li{padding:10px;cursor:pointer;display:flex;align-items:center;border-bottom:1px solid #ccc}.results-list li img{width:50px;height:50px;margin-right:10px}.close-popup:hover,.results-list li:hover{background-color:#f0f0f0}.pagination{display:flex;justify-content:center;align-items:center;margin:10px;justify-content:space-between}.close-popup{margin:5px;padding:5px;cursor:pointer;font-size:1.5rem;font-weight:700;width:40px;height:40px;color:red;border-radius:50%;background-color:#fff}.close-popup:disabled{cursor:not-allowed;opacity:.5}.results-count{margin:10px}@media (max-width:600px){.results-list,.results-list-container{max-height:calc(100vh - 132px)}.dropdown-content,.pagination{position:fixed;width:100%;background-color:#fff}.dropdown-content{left:50%;top:50%;transform:translate(-50%,-50%);height:100%;overflow-y:auto;border:1px solid #ccc;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.3);z-index:999}.results-list-container{padding:0}.pagination{bottom:0;left:0;margin:0;padding-bottom:80px;border-top:1px solid #ccc;z-index:1000}}\n    ",document.head.appendChild(o);const i=document.querySelector(".search-form");let r,d,s,a,l;if(!i)return void console.error("Element with class search-form not found");{r=document.createElement("div"),r.classList.add("dropdown");const t=document.createElement("input");t.id="searchQuery",t.classList.add("search-input"),t.setAttribute("autocomplete","off"),t.setAttribute("type","search"),t.setAttribute("name","q"),t.setAttribute("placeholder","Search Downstream Marketplace"),t.setAttribute("required","true");const n=document.createElement("button");n.textContent="X",n.style.display="none",n.style.position="absolute",n.style.right="15px",n.style.top="18px",n.style.cursor="pointer",n.style.backgroundColor="white",n.style.border="none",n.style.borderRadius="50%",n.style.width="20px",n.style.height="20px",n.style.fontSize="1rem",n.style.fontWeight="400",n.style.color="#858796",n.addEventListener("click",function(){t.value="",n.style.display="none",e()}),t.addEventListener("input",function(){t.value.length>0?n.style.display="block":n.style.display="none"});const o=document.createElement("div");o.classList.add("spinner"),o.id="spinner",d=document.createElement("div"),d.classList.add("dropdown-content"),d.id="results-container";const c=document.createElement("div");c.id="results",c.classList.add("results-list-container"),s=document.createElement("div"),s.id="pagination",s.classList.add("pagination"),s.style.display="none",l=document.createElement("span"),l.classList.add("results-count"),a=document.createElement("button"),a.id="closePopup",a.classList.add("close-popup"),a.textContent="X",a.addEventListener("click",function(){event.preventDefault(),e()}),window.innerWidth<600?a.style.display="block":a.style.display="none",s.appendChild(l),s.appendChild(a),d.appendChild(c),window.innerWidth>=600&&d.appendChild(s),r.appendChild(t),r.appendChild(o),r.appendChild(n),r.appendChild(d),window.innerWidth<600&&r.appendChild(s),i.appendChild(r)}document.getElementById("searchForm");const c=document.getElementById("searchQuery"),p=document.getElementById("spinner"),u=document.getElementById("results"),m=document.getElementsByTagName("body")[0];window.addEventListener("resize",function(){window.innerWidth<600?(r.appendChild(s),a.style.display="block"):(a.style.display="none",d.appendChild(s))});let h=0,y=window.scrollY,f=m.style.position;let g;c.addEventListener("focus",function(){h>0&&t()}),document.addEventListener("click",function(t){d.contains(t.target)||c.contains(t.target)||e()}),c.addEventListener("input",function(e){clearTimeout(g),g=setTimeout(function(){if(!c.value||c.value.length>2){const e=c.value;n(e)}},500)})});